{"name":"Spicy-stonehenge","body":"# What is Spicy Stonehenge\r\n\r\nSpicy Stonehenge is an implementation of Apache Stonehenge [1] built on top of the Turmeric SOA platform [2]. Our goal with this project is to create a use case that researchers can use to validate their research and compare results by using a common platform.\r\n\r\n# Quick Overview\r\n\r\nThe Stonehenge system is composed of 5 web services, 1 web application and 2 databases.\r\n\r\nThe services are described as follows:\r\n\r\n*   **Business Service** - Provides the business logic required for the web application to operate.\r\n*   **Configuration Service** - Acts as a directory where references to all the instances of the web services are kept. Whenever the trader client wants to perform an action, it must first ask the configuration service for an endpoint.\r\n*   **Order Processing Service** - Whenever a buy or sell order is made, the business service will interact with the Order Processing Service to make the order final.\r\n*   **Exchange Service** - If a purchase is made in a currency different from that of the wallet used, it gets converted by the Exchange Service which uses real currency data from Google.\r\n*   **Quote Service** - The quote service provides live quote information from Yahoo Finance. This service can be used directly to query the price of a certain stock symbol. It is also used indirectly whenever an order is placed as the Order Processing Service queries it to find the right price at which to place the order.\r\n\r\nIn this project, it’s common to see the abbreviations BS and OPS, these refer to the Business and Order Processing services respectively.\r\n\r\nThe databases run off an Apache Derby server and skeletons for them are also provided as part of this project. This database was not available as part of the original project and was built from scratch.\r\n\r\nThe web application is built using PHP and most of the code is reused from the original project. Some minor changes have been made to accommodate the new, Turmeric-powered web services.\r\n\r\n# Deploying Spicy Stonehenge\r\n\r\nIn this section we’ll cover how to deploy Spicy Stonehenge on Turmeric SOA. This is merely a walkthrough of how to go from source code to a running system. For any questions of how and why it works, please feel free to ask your question at Turmeric SOA’s forums [3] or directly contact me at t.a.espinha [at] tudelft [dot] nl if the question is about this implementation of Stonehenge.\r\n\r\n## Walkthrough\r\n\r\n### Setting up Jetty with the web services\r\n\r\n1. Start by cloning the git repository from https://github.com/SERG-Delft/spicy-stonehenge\r\n\r\n2. The projects must be compiled with Maven (or m2e if you prefer) and you should start by compiling the TradeTypeLibrary and the common-library.\r\n\r\n3. After these two projects have been compiled, you can proceed to compile the remaining projects always making sure you compile first the <project-name>, then the <project-name>Impl and finally the project ending in -war. Each service has these three folders conveniently placed inside one folder so you should be able to find them easily.\r\n\r\nJust for reference, <project-name> projects describe web service interfaces for Turmeric SOA.\r\n<project-name>Impl projects describe web service implementations, which rely on the interfaces for its implementation.\r\nProjects ending in -war are merely packaging projects.\r\n\r\n4. When all the projects have been compiled, inside the -war folder of each project there is a target/ folder which contains a WAR file and a folder with the contents of the WAR file. It is the uncompressed folder we will be using for the purposes of this walkthrough. The next step involves setting up Jetty. Later we will come back to the -war projects. \r\n\r\n5. At this point we should have all the folders resulting from the compilation of the -war projects. We then need to proceed to download and unzip Jetty Turmeric from the download page in the GitHub project. The file in question is jetty-turmeric-1.1.0.zip. This distribution of Jetty includes all the Turmeric libraries required to make it work.\r\n\r\n6. After unzipping Jetty, it is ready to run but before we start it, we must copy all the folders named *-war/target/<project-name>/ into <jetty>/webapps/. Keep in mind that the name of the folder chosen inside webapps/ will also be the name used in the URL whenever the service is to be invoked.\r\n\r\n7. This completes setting up the web services.\r\n\r\n### Setting up the databases\r\n\r\nDeploying the Spicy Stonehenge project involves two databases. The skeleton for these is provided under the \"databases/\" folder.\r\n\r\nBefore actually moving onto the deployment of the database, we must start by downloading Apache Derby from http://db.apache.org/derby/derby_downloads.html. After unpacking it, we must first start Derby as a network server and then load the skeleton onto the database.\r\n\r\nTo do so, we require another tool called Apache DdlUtils. This tool allows us to load data into all types of databases, just as long as they provide a JDBC connector.\r\n\r\nThe only step necessary to use DdlUtils is to invoke the ant targets for data import, by executing the following commands:\r\n\r\n> ant import-stonehenge-db\r\n> ant import-quotes-db\r\n\r\n(**Note:** This walkthrough assumes you have a working installation of Apache Ant. More info at [4])\r\n\r\nAfter this step completes successfully, you will have loaded the database structure and data for the stonehenge and quotes databases.\r\n\r\n### Setting up the web application - currently not working\r\n\r\nFor this step, you are expected to have a working Apache + PHP installation. You are also required to have the WSO2 PHP library for web services installed in your Apache (more info at [5] - a DLL is provided for Windows and the library must be compiled manually for Linux).\r\n\r\nAfter the web application is setup, all that is left to do is copy the contents of the stocktrader folder into the document root of your Apache installation and you’re good to go!\r\n\r\nIf you should require more in-depth guidance to go through any of these steps, feel free to e-mail me at t.a.espinha [at] tudelft [dot] nl.\r\n\r\n### References\r\n\r\n[1] - http://incubator.apache.org/stonehenge/\r\n\r\n[2] - https://www.ebayopensource.org/index.php/Turmeric/HomePage\r\n\r\n[3] - https://www.ebayopensource.org/forum/\r\n\r\n[4] - http://ant.apache.org/\r\n\r\n[5] - http://wso2.com/products/web-services-framework/php/\r\n","tagline":"The Turmeric version of Stonehenge's services","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}